<?php /*  Plugin Name: Jobs Calendar  Plugin URI: http://wordpress.org  Description: Manage and Display Jobs  Version: 1.2  Author: Softscripts  Author URI: http://www.softscripts.net */global $wpdb;$siteurl = get_bloginfo('url');define('JC_PLUGIN_URL', WP_PLUGIN_URL.'/jobs-calendar');define("WP_crews_TABLE", $wpdb->prefix . "crews");define("WP_jobs_TABLE", $wpdb->prefix . "jobs");define("WP_services_TABLE", $wpdb->prefix . "jobs_services");define("WP_customers_TABLE", $wpdb->prefix . "jobs_customers");/* Load all functions */require_once ( 'calendar/util.php' );require_once ( 'admin/index.php' );require_once ( 'calendar/index.php' );add_action('admin_menu','jobs_menu');function jobs_menu() {	add_menu_page('Jobs Calendar','Jobs Calendar','manage_options','manage_jobs','manage_jobs', '', 22);	add_submenu_page('manage_jobs','Crews','Crews','manage_options','manage_crews','manage_crews');	add_submenu_page('manage_jobs','Services','Services','manage_options','manage_services','manage_services');	add_submenu_page('manage_jobs','Customers','Customers','manage_options','manage_customers','manage_customers');}add_shortcode('job-calendar', 'job_func');// this hook will cause our creation function to run when the plugin is activatedregister_activation_hook( __FILE__, 'plugin_install' );function plugin_install() {	global $wpdb; // do NOT forget this global	if($wpdb->get_var("show tables like '". WP_crews_TABLE) != WP_crews_TABLE)  {		$wpdb->query("CREATE TABLE IF NOT EXISTS `". WP_crews_TABLE . "` (`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY , `name` VARCHAR( 250 ) NOT NULL ,  `order` INT NOT NULL , `description` LONGTEXT NOT NULL)");	}	if($wpdb->get_var("show tables like '". WP_jobs_TABLE) != WP_jobs_TABLE) {		$wpdb->query("CREATE TABLE IF NOT EXISTS `". WP_jobs_TABLE . "` (`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,	`crew_id` INT NOT NULL , `date` VARCHAR( 100 ) NOT NULL , `service` VARCHAR( 100 ) NOT NULL , `job_number` VARCHAR( 100 ) NOT NULL , `customer` VARCHAR( 100 ) NOT NULL ,	`address` VARCHAR( 250 ) NOT NULL ,	`suburb` VARCHAR( 250 ) NOT NULL ,	`melways_ref` VARCHAR( 250 ) NOT NULL ,	`equipment` LONGTEXT NOT NULL ,	`start_time` VARCHAR( 100 ) NOT NULL , `end_time` VARCHAR( 100 ) NOT NULL ,	`details` LONGTEXT NOT NULL)");	}	if($wpdb->get_var("show tables like '". WP_services_TABLE) != WP_services_TABLE) {		$wpdb->query("CREATE TABLE IF NOT EXISTS `". WP_services_TABLE . "` (`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,	`name` VARCHAR( 250 ) NOT NULL , `order` INT NOT NULL)");	}        if($wpdb->get_var("show tables like '". WP_customers_TABLE) != WP_customers_TABLE) {		$wpdb->query("CREATE TABLE IF NOT EXISTS `". WP_customers_TABLE . "` (`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,	`name` VARCHAR( 250 ) NOT NULL , `email` VARCHAR( 100 ) NOT NULL)");	}}add_action('wp_enqueue_scripts', 'jc_front_enqueue' );function jc_front_enqueue(){    wp_register_style( 'jc_css', plugins_url('calendar/css/style.css', __FILE__) );    wp_enqueue_style( 'jc_css' );        wp_register_script( 'jc_js', plugins_url('calendar/js/scripts.js',__FILE__),array('jquery'));    wp_enqueue_script( 'jc_js' );    }?>